(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{16:function(t,e,n){t.exports={title:"ContactForm_title__3MqSl",form:"ContactForm_form__1fuOn",label:"ContactForm_label__378f8",input:"ContactForm_input__gm87B",btn:"ContactForm_btn__2Bpnz"}},25:function(t,e,n){t.exports={wrapper:"Filter_wrapper__IqOjQ",label:"Filter_label__3DcZT",name:"Filter_name__pSTfl",input:"Filter_input__2DoVp"}},26:function(t,e,n){t.exports={listItem:"ContactList_listItem__29Cbr",name:"ContactList_name__2WLgA",namber:"ContactList_namber__xUfTY",btn:"ContactList_btn__1Xk4q"}},88:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(27),s=n.n(r),o=n(15),i=n(5),l=n(1),u=function(t){var e=t.children;return Object(l.jsx)("div",{className:"Container",children:e})},b=n(7),j={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},h=function(){return Object(l.jsxs)("nav",{children:[Object(l.jsx)(o.b,{to:"/",exact:!0,style:j.link,activeStyle:j.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(l.jsx)(o.b,{to:"/contacts",exact:!0,style:j.link,activeStyle:j.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})},d=n(13),m=n.n(d),p=n(22),f=n(12),O=n.n(f),x=n(2),v=Object(x.b)("auth/registerRequest"),g=Object(x.b)("auth/registerSuccess"),y=Object(x.b)("auth/registerError"),C=Object(x.b)("auth/loginRequest"),k=Object(x.b)("auth/loginSuccess"),w=Object(x.b)("auth/loginError"),_=Object(x.b)("auth/logoutRequest"),S=Object(x.b)("auth/logoutSuccess"),N=Object(x.b)("auth/logoutError"),L=(Object(x.b)("auth/getCurrentUserRequest"),Object(x.b)("auth/getCurrentUserSuccess")),A=Object(x.b)("auth/getCurrentUserError");O.a.defaults.baseURL="https://lpj-tasker.herokuapp.com";var F=function(t){O.a.defaults.headers.common.Authorization="Bearer ".concat(t)},D=function(){O.a.defaults.headers.common.Authorization=""},B=function(t){return Boolean(t.auth.token)},R=function(t){return t.auth.user.name},q=n.p+"static/media/default-avatar.e44fc4e2.png",E={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},I={onLogout:function(){return function(){var t=Object(p.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(_()),t.prev=1,t.next=4,O.a.post("/users/logout");case 4:D(),e(S()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(N(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},U=Object(b.b)((function(t){return{name:R(t),avatar:q}}),I)((function(t){var e=t.avatar,n=t.name,a=t.onLogout;return Object(l.jsxs)("div",{style:E.container,children:[Object(l.jsx)("img",{src:e,alt:"",width:"32",style:E.avatar}),Object(l.jsxs)("span",{style:E.name,children:["Welcome, ",n]}),Object(l.jsx)("button",{type:"button",onClick:a,children:"Logout"})]})})),W={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},z=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(o.b,{to:"/register",exact:!0,style:W.link,activeStyle:W.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(l.jsx)(o.b,{to:"/login",exact:!0,style:W.link,activeStyle:W.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})},T={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},M=Object(b.b)((function(t){return{isAuthenticated:B(t)}}))((function(t){var e=t.isAuthenticated;return Object(l.jsxs)("header",{style:T.header,children:[Object(l.jsx)(h,{}),e?Object(l.jsx)(U,{}):Object(l.jsx)(z,{})]})})),J={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},H=function(){return Object(l.jsx)("div",{style:J.container,children:Object(l.jsxs)("h1",{style:J.title,children:["\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430"," ",Object(l.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]})})},P=Object(x.b)("contacts/fetchContactRequest"),Q=Object(x.b)("contacts/fetchContactSuccess"),V=Object(x.b)("contacts/fetchContactError"),X=Object(x.b)("contacts/addContactRequest"),Y=Object(x.b)("contacts/addContactSuccess"),Z=Object(x.b)("contacts/addContactError"),G=Object(x.b)("contacts/delContactRequest"),K=Object(x.b)("contacts/delContactSuccess"),$=Object(x.b)("contacts/delContactError"),tt=Object(x.b)("Contact/filter"),et=n(28),nt=function(t){return t.contacts.items},at=function(t){return t.contacts.loading},ct=function(t){return t.contacts.filter},rt=Object(et.a)([ct,nt],(function(t,e){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),st=n(25),ot=n.n(st),it=Object(b.b)((function(t){return{value:ct(t)}}),(function(t){return{onChange:function(e){return t(tt(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(l.jsx)("div",{className:ot.a.wrapper,children:Object(l.jsxs)("label",{className:ot.a.label,children:[Object(l.jsx)("span",{className:ot.a.name,children:"Find contacts by name"}),Object(l.jsx)("input",{className:ot.a.input,type:"text",name:"name",value:e,onChange:n})]})})})),lt=n(18),ut=n(19),bt=n(21),jt=n(20);O.a.defaults.baseURL="http://localhost:3000";var ht,dt,mt,pt,ft,Ot=n(26),xt=n.n(Ot),vt=function(t){Object(bt.a)(n,t);var e=Object(jt.a)(n);function n(){return Object(lt.a)(this,n),e.apply(this,arguments)}return Object(ut.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){var t=this.props,e=t.contacts,n=t.onDelBtnClick;return Object(l.jsx)("ul",{children:e.map((function(t){return Object(l.jsxs)("li",{className:xt.a.listItem,children:[Object(l.jsxs)("span",{className:xt.a.name,children:[t.name,":"]}),Object(l.jsx)("span",{className:xt.a.namber,children:t.number}),Object(l.jsx)("button",{className:xt.a.btn,type:"button",id:t.id,onClick:function(t){return n(t.target.id)},children:"Delete"})]},t.id)}))})}}]),n}(c.a.Component),gt=Object(b.b)((function(t){return{contacts:rt(t)}}),(function(t){return{onDelBtnClick:function(e){return t(function(t){return function(e){e(G()),O.a.delete("/contacts/".concat(t)).then((function(){return e(K(t))})).catch((function(t){return e($(t))}))}}(e))},fetchContacts:function(){return t(function(){var t=Object(p.a)(m.a.mark((function t(e){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(P()),t.prev=1,t.next=4,O.a.get("/contacts");case 4:n=t.sent,a=n.data,e(Q(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(V(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}}}))(vt),yt=n(3),Ct=n(16),kt=n.n(Ct),wt=function(t){Object(bt.a)(n,t);var e=Object(jt.a)(n);function n(){var t;Object(lt.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",number:""},t.handelChange=function(e){var n=e.currentTarget,a=n.name,c=n.value;t.setState(Object(yt.a)({},a,c))},t.resetForm=function(){t.setState({name:"",number:""})},t.handleSabmit=function(e){e.preventDefault();var n=t.state,a=n.name,c=n.number;if(t.props.contacts.some((function(t){return t.name===a})))return alert('Name "'.concat(a,'" already exists, please enter another name.'));t.props.onSubmit({name:a,number:c}),t.resetForm()},t}return Object(ut.a)(n,[{key:"render",value:function(){var t=this.props.contacts;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{className:kt.a.title,children:"Phonebook"}),Object(l.jsxs)("form",{className:kt.a.form,autoComplete:"off",onSubmit:this.handleSabmit,children:[Object(l.jsxs)("label",{className:kt.a.label,children:["Name:",Object(l.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handelChange,className:kt.a.input})]}),Object(l.jsxs)("label",{className:kt.a.label,children:["Number:",Object(l.jsx)("input",{type:"tel",name:"number",value:this.state.number,onChange:this.handelChange,className:kt.a.input})]}),Object(l.jsx)("button",{type:"submit",className:kt.a.btn,children:"Add contact"})]}),Object(l.jsxs)("h2",{className:kt.a.title,children:["Contacts (",t.length,")"]})]})})}}]),n}(a.Component),_t=Object(b.b)((function(t){return{contacts:nt(t)}}),(function(t){return{onSubmit:function(e){return t(function(t){var e=t.name,n=t.number;return function(t){var a={name:e,number:n};t(X()),O.a.post("/contacts",a).then((function(e){var n=e.data;return t(Y(n))})).catch((function(e){return t(Z(e))}))}}(e))}}}))(wt),St=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h2",{className:"message",children:"Nothing, please start creating your contact"})})},Nt=n(46),Lt=n.n(Nt),At=function(){return Object(l.jsx)("div",{className:"loaderDiv",children:Object(l.jsx)(Lt.a,{loading:!0,color:"red"})})},Ft=Object(b.b)((function(t){return{contacts:nt(t),isLoading:at(t)}}))((function(t){var e=t.contacts,n=t.isLoading;return Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)(_t,{}),0===e.length&&Object(l.jsx)(St,{}),e.length>1&&Object(l.jsx)(it,{}),n&&Object(l.jsx)(At,{}),Object(l.jsx)(gt,{})]})})),Dt={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}},Bt=function(t){Object(bt.a)(n,t);var e=Object(jt.a)(n);function n(){var t;Object(lt.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(yt.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onRegister(t.state),t.setState({name:"",email:"",password:""})},t}return Object(ut.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,a=t.password;return Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)("h1",{className:"title",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(l.jsxs)("form",{onSubmit:this.handleSubmit,style:Dt.form,autoComplete:"off",children:[Object(l.jsxs)("label",{style:Dt.label,children:["\u0418\u043c\u044f",Object(l.jsx)("input",{type:"text",name:"name",value:e,onChange:this.handleChange})]}),Object(l.jsxs)("label",{style:Dt.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(l.jsx)("input",{type:"email",name:"email",value:n,onChange:this.handleChange})]}),Object(l.jsxs)("label",{style:Dt.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(l.jsx)("input",{type:"password",name:"password",value:a,onChange:this.handleChange})]}),Object(l.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}}]),n}(a.Component),Rt={onRegister:function(t){return function(){var e=Object(p.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(v()),e.prev=1,e.next=4,O.a.post("/users/signup",t);case 4:a=e.sent,F(a.data.token),n(g(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(y(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},qt=Object(b.b)(null,Rt)(Bt),Et={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15}},It=function(t){Object(bt.a)(n,t);var e=Object(jt.a)(n);function n(){var t;Object(lt.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(yt.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onLogin(t.state),t.setState({name:"",email:"",password:""})},t}return Object(ut.a)(n,[{key:"render",value:function(){var t=this.state,e=t.email,n=t.password;return Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsx)("h1",{className:"title",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(l.jsxs)("form",{onSubmit:this.handleSubmit,style:Et.form,autoComplete:"off",children:[Object(l.jsxs)("label",{style:Et.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(l.jsx)("input",{type:"email",name:"email",value:e,onChange:this.handleChange})]}),Object(l.jsxs)("label",{style:Et.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(l.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange})]}),Object(l.jsx)("button",{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}}]),n}(a.Component),Ut={onLogin:function(t){return function(){var e=Object(p.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(C()),e.prev=1,e.next=4,O.a.post("/users/login",t);case 4:a=e.sent,F(a.data.token),n(k(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(w(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},Wt=Object(b.b)(null,Ut)(It),zt=function(){return Object(l.jsxs)(u,{children:[Object(l.jsx)(M,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:H}),Object(l.jsx)(i.a,{path:"/register",component:qt}),Object(l.jsx)(i.a,{path:"/login",component:Wt}),Object(l.jsx)(i.a,{path:"/contacts",component:Ft})]})]})},Tt=(n(87),n(88),n(47)),Mt=n(29),Jt=n(17),Ht=n(6),Pt=Object(x.c)([],(ht={},Object(yt.a)(ht,Q,(function(t,e){return e.payload})),Object(yt.a)(ht,Y,(function(t,e){var n=e.payload;return[].concat(Object(Mt.a)(t),[n])})),Object(yt.a)(ht,K,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==Number(n)}))})),ht)),Qt=Object(x.c)("",Object(yt.a)({},tt,(function(t,e){return e.payload}))),Vt=Object(x.c)(!1,(dt={},Object(yt.a)(dt,P,(function(){return!0})),Object(yt.a)(dt,Q,(function(){return!1})),Object(yt.a)(dt,V,(function(){return!1})),Object(yt.a)(dt,X,(function(){return!0})),Object(yt.a)(dt,Y,(function(){return!1})),Object(yt.a)(dt,Z,(function(){return!1})),Object(yt.a)(dt,G,(function(){return!0})),Object(yt.a)(dt,K,(function(){return!1})),Object(yt.a)(dt,$,(function(){return!1})),dt)),Xt=Object(x.c)(null,{}),Yt=Object(Ht.c)({items:Pt,filter:Qt,loading:Vt,error:Xt}),Zt=n(48),Gt=n.n(Zt),Kt={name:null,email:null},$t=Object(x.c)(Kt,(mt={},Object(yt.a)(mt,g,(function(t,e){return e.payload.user})),Object(yt.a)(mt,k,(function(t,e){return e.payload.user})),Object(yt.a)(mt,S,(function(){return Kt})),Object(yt.a)(mt,L,(function(t,e){return e.payload})),mt)),te=Object(x.c)(null,(pt={},Object(yt.a)(pt,g,(function(t,e){return e.payload.token})),Object(yt.a)(pt,k,(function(t,e){return e.payload.token})),Object(yt.a)(pt,S,(function(){return null})),pt)),ee=function(t,e){return e.payload},ne=Object(x.c)(null,(ft={},Object(yt.a)(ft,y,ee),Object(yt.a)(ft,w,ee),Object(yt.a)(ft,N,ee),Object(yt.a)(ft,A,ee),ft)),ae=Object(Ht.c)({user:$t,token:te,error:ne}),ce=Object(Mt.a)(Object(x.d)({serializableCheck:{ignoredActions:[Jt.a,Jt.f,Jt.b,Jt.c,Jt.d,Jt.e]}})),re={key:"auth",storage:Gt.a,whitelist:["token"]},se=Object(x.a)({reducer:{auth:Object(Jt.g)(re,ae),contacts:Yt},middleware:ce,devTools:!1}),oe=Object(Jt.h)(se);s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(b.a,{store:se,children:Object(l.jsx)(Tt.a,{loading:null,persistor:oe,children:Object(l.jsx)(o.a,{children:Object(l.jsx)(zt,{})})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.25589378.chunk.js.map