(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{20:function(t,e,n){t.exports={title:"ContactForm_title__3MqSl",form:"ContactForm_form__1fuOn",label:"ContactForm_label__378f8",input:"ContactForm_input__gm87B",btn:"ContactForm_btn__2Bpnz"}},25:function(t,e,n){t.exports={wrapper:"Filter_wrapper__IqOjQ",label:"Filter_label__3DcZT",name:"Filter_name__pSTfl",input:"Filter_input__2DoVp"}},26:function(t,e,n){t.exports={listItem:"ContactList_listItem__29Cbr",name:"ContactList_name__2WLgA",namber:"ContactList_namber__xUfTY",btn:"ContactList_btn__1Xk4q"}},88:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(27),s=n.n(r),o=n(19),u=n(15),i=n(16),l=n(18),b=n(17),j=n(5),h=n(6),m=n(1),p=function(t){var e=t.children;return Object(m.jsx)("div",{className:"Container",children:e})},d=function(){return Object(m.jsxs)("nav",{children:[Object(m.jsx)(o.b,{to:"/",exact:!0,className:"link",activeClassName:"activeLink",children:"Home"}),Object(m.jsx)(o.b,{to:"/contacts",exact:!0,className:"link",activeClassName:"activeLink",children:"Contacts"})]})},O=n(13),f=n.n(O),v=n(22),x=n(12),g=n.n(x),C=n(2),N=Object(C.b)("auth/registerRequest"),k=Object(C.b)("auth/registerSuccess"),y=Object(C.b)("auth/registerError"),w=Object(C.b)("auth/loginRequest"),_=Object(C.b)("auth/loginSuccess"),L=Object(C.b)("auth/loginError"),S=Object(C.b)("auth/logoutRequest"),F=Object(C.b)("auth/logoutSuccess"),R=Object(C.b)("auth/logoutError"),D=Object(C.b)("auth/getCurrentUserRequest"),q=Object(C.b)("auth/getCurrentUserSuccess"),A=Object(C.b)("auth/getCurrentUserError");g.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var E=function(t){g.a.defaults.headers.common.Authorization="Bearer ".concat(t)},B=function(){g.a.defaults.headers.common.Authorization=""},T=function(t){return Boolean(t.auth.token)},M=function(t){return t.auth.user.name},U=n.p+"static/media/default-avatar.fe4c4f3c.jpeg",I={onLogout:function(){return function(){var t=Object(v.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(S()),t.prev=1,t.next=4,g.a.post("/users/logout");case 4:B(),e(F()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(R(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},P=Object(h.b)((function(t){return{name:M(t),avatar:U}}),I)((function(t){var e=t.avatar,n=t.name,a=t.onLogout;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("img",{src:e,alt:"",width:"32",className:"avatar"}),Object(m.jsxs)("span",{className:"name",children:["Welcome, ",n]}),Object(m.jsx)("button",{type:"button",onClick:a,className:"user-btn",children:"Log out"})]})})),z=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(o.b,{to:"/register",exact:!0,className:"link",activeClassName:"activeLink",children:"Registration"}),Object(m.jsx)(o.b,{to:"/login",exact:!0,className:"link",activeClassName:"activeLink",children:"Login"})]})},J=Object(h.b)((function(t){return{isAuthenticated:T(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)(d,{}),e?Object(m.jsx)(P,{}):Object(m.jsx)(z,{})]})})),G=function(){return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"home-view-title",children:"Cloud phonebook"}),Object(m.jsxs)("h2",{className:"home-view-subtitle",children:["Your contacts in one place"," ",Object(m.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]}),Object(m.jsx)("img",{className:"home-view-img",src:"https://cdn.lifehacker.ru/wp-content/uploads/2018/01/Kak-perenesti-kontakty-s-odnogo-telefona-na-drugoJ_1516567189-1140x570.jpg",alt:"home_view_img"})]})},W=Object(C.b)("contacts/fetchContactRequest"),Y=Object(C.b)("contacts/fetchContactSuccess"),H=Object(C.b)("contacts/fetchContactError"),K=Object(C.b)("contacts/addContactRequest"),Q=Object(C.b)("contacts/addContactSuccess"),V=Object(C.b)("contacts/addContactError"),X=Object(C.b)("contacts/delContactRequest"),Z=Object(C.b)("contacts/delContactSuccess"),$=Object(C.b)("contacts/delContactError"),tt=Object(C.b)("Contact/filter"),et=n(28),nt=function(t){return t.contacts.items},at=function(t){return t.contacts.loading},ct=function(t){return t.contacts.filter},rt=Object(et.a)([ct,nt],(function(t,e){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),st=n(25),ot=n.n(st),ut=Object(h.b)((function(t){return{value:ct(t)}}),(function(t){return{onChange:function(e){return t(tt(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(m.jsx)("div",{className:ot.a.wrapper,children:Object(m.jsxs)("label",{className:ot.a.label,children:[Object(m.jsx)("span",{className:ot.a.name,children:"Find contacts by name"}),Object(m.jsx)("input",{className:ot.a.input,type:"text",name:"name",value:e,onChange:n})]})})}));g.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var it,lt,bt,jt,ht,mt=n(26),pt=n.n(mt),dt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){var t=this.props,e=t.contacts,n=t.onDelBtnClick;return Object(m.jsx)("ul",{children:e.map((function(t){return Object(m.jsxs)("li",{className:pt.a.listItem,children:[Object(m.jsxs)("span",{className:pt.a.name,children:[t.name,":"]}),Object(m.jsx)("span",{className:pt.a.namber,children:t.number}),Object(m.jsx)("button",{className:pt.a.btn,type:"button",id:t.id,onClick:function(t){return n(t.target.id)},children:"Delete"})]},t.id)}))})}}]),n}(c.a.Component),Ot=Object(h.b)((function(t){return{contacts:rt(t)}}),(function(t){return{onDelBtnClick:function(e){return t(function(t){return function(e){e(X()),g.a.delete("/contacts/".concat(t)).then((function(){return e(Z(t))})).catch((function(t){return e($(t.message))}))}}(e))},fetchContacts:function(){return t(function(){var t=Object(v.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(W()),t.prev=1,t.next=4,g.a.get("/contacts");case 4:n=t.sent,a=n.data,e(Y(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(H(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}}}))(dt),ft=n(3),vt=n(20),xt=n.n(vt),gt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",number:""},t.handelChange=function(e){var n=e.currentTarget,a=n.name,c=n.value;t.setState(Object(ft.a)({},a,c))},t.resetForm=function(){t.setState({name:"",number:""})},t.handleSabmit=function(e){e.preventDefault();var n=t.state,a=n.name,c=n.number;if(t.props.contacts.some((function(t){return t.name===a})))return alert('Name "'.concat(a,'" already exists, please enter another name.'));t.props.onSubmit({name:a,number:c}),t.resetForm()},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props.contacts;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:xt.a.title,children:"Phonebook"}),Object(m.jsxs)("form",{className:xt.a.form,autoComplete:"off",onSubmit:this.handleSabmit,children:[Object(m.jsxs)("label",{className:xt.a.label,children:["Name:",Object(m.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handelChange,className:xt.a.input})]}),Object(m.jsxs)("label",{className:xt.a.label,children:["Number:",Object(m.jsx)("input",{type:"tel",name:"number",value:this.state.number,onChange:this.handelChange,className:xt.a.input})]}),Object(m.jsx)("button",{type:"submit",className:xt.a.btn,children:"Add contact"})]}),Object(m.jsxs)("h2",{className:xt.a.title,children:["Contacts (",t.length,")"]})]})})}}]),n}(a.Component),Ct=Object(h.b)((function(t){return{contacts:nt(t)}}),(function(t){return{onSubmit:function(e){return t(function(t){var e=t.name,n=t.number;return function(t){var a={name:e,number:n};t(K()),g.a.post("/contacts",a).then((function(e){var n=e.data;return t(Q(n))})).catch((function(e){return t(V(e.message))}))}}(e))}}}))(gt),Nt=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h2",{className:"message",children:"Nothing, please start creating your contact"})})},kt=n(46),yt=n.n(kt),wt=function(){return Object(m.jsx)("div",{className:"loaderDiv",children:Object(m.jsx)(yt.a,{loading:!0,color:"red"})})},_t=Object(h.b)((function(t){return{contacts:nt(t),isLoading:at(t)}}))((function(t){var e=t.contacts,n=t.isLoading;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)(Ct,{}),0===e.length&&Object(m.jsx)(Nt,{}),e.length>1&&Object(m.jsx)(ut,{}),n&&Object(m.jsx)(wt,{}),Object(m.jsx)(Ot,{})]})})),Lt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(ft.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onRegister(t.state),t.setState({name:"",email:"",password:""})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,a=t.password;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"title",children:"Registration"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"authForm",autoComplete:"off",children:[Object(m.jsxs)("label",{className:"authLabel",children:["Name",Object(m.jsx)("input",{className:"input",type:"text",name:"name",value:e,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Mail",Object(m.jsx)("input",{className:"input",type:"email",name:"email",value:n,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Password",Object(m.jsx)("input",{className:"input",type:"password",name:"password",value:a,onChange:this.handleChange})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Registration"})]})]})}}]),n}(a.Component),St={onRegister:function(t){return function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(N()),e.prev=1,e.next=4,g.a.post("/users/signup",t);case 4:a=e.sent,E(a.data.token),n(k(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(y(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},Ft=Object(h.b)(null,St)(Lt),Rt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(ft.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onLogin(t.state),t.setState({name:"",email:"",password:""})},t}return Object(i.a)(n,[{key:"render",value:function(){var t=this.state,e=t.email,n=t.password;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"title",children:"Enter your login and password"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"authForm",autoComplete:"off",children:[Object(m.jsxs)("label",{className:"authLabel",children:["Mail",Object(m.jsx)("input",{className:"input",type:"email",name:"email",value:e,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Password",Object(m.jsx)("input",{className:"input",type:"password",name:"password",value:n,onChange:this.handleChange})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Log in"})]})]})}}]),n}(a.Component),Dt={onLogin:function(t){return function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(w()),e.prev=1,e.next=4,g.a.post("/users/login",t);case 4:a=e.sent,E(a.data.token),n(_(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(L(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},qt=Object(h.b)(null,Dt)(Rt),At=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentToProps()}},{key:"render",value:function(){return Object(m.jsxs)(p,{children:[Object(m.jsx)(J,{}),Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/",component:G}),Object(m.jsx)(j.a,{path:"/register",component:Ft}),Object(m.jsx)(j.a,{path:"/login",component:qt}),Object(m.jsx)(j.a,{path:"/contacts",component:_t})]})]})}}]),n}(c.a.Component),Et={onGetCurrentToProps:function(){return function(){var t=Object(v.a)(f.a.mark((function t(e,n){var a,c,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),c=a.auth.token){t.next=3;break}return t.abrupt("return");case 3:return E(c),e(D()),t.prev=5,t.next=8,g.a.get("/users/current");case 8:r=t.sent,e(q(r.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(A(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},Bt=Object(h.b)(null,Et)(At),Tt=(n(87),n(88),n(47)),Mt=n(29),Ut=n(21),It=n(7),Pt=Object(C.c)([],(it={},Object(ft.a)(it,Y,(function(t,e){return e.payload})),Object(ft.a)(it,Q,(function(t,e){var n=e.payload;return[].concat(Object(Mt.a)(t),[n])})),Object(ft.a)(it,Z,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==Number(n)}))})),it)),zt=Object(C.c)("",Object(ft.a)({},tt,(function(t,e){return e.payload}))),Jt=Object(C.c)(!1,(lt={},Object(ft.a)(lt,W,(function(){return!0})),Object(ft.a)(lt,Y,(function(){return!1})),Object(ft.a)(lt,H,(function(){return!1})),Object(ft.a)(lt,K,(function(){return!0})),Object(ft.a)(lt,Q,(function(){return!1})),Object(ft.a)(lt,V,(function(){return!1})),Object(ft.a)(lt,X,(function(){return!0})),Object(ft.a)(lt,Z,(function(){return!1})),Object(ft.a)(lt,$,(function(){return!1})),lt)),Gt=Object(C.c)(null,{}),Wt=Object(It.c)({items:Pt,filter:zt,loading:Jt,error:Gt}),Yt=n(48),Ht=n.n(Yt),Kt={name:null,email:null},Qt=Object(C.c)(Kt,(bt={},Object(ft.a)(bt,k,(function(t,e){return e.payload.user})),Object(ft.a)(bt,_,(function(t,e){return e.payload.user})),Object(ft.a)(bt,F,(function(){return Kt})),Object(ft.a)(bt,q,(function(t,e){return e.payload})),bt)),Vt=Object(C.c)(null,(jt={},Object(ft.a)(jt,k,(function(t,e){return e.payload.token})),Object(ft.a)(jt,_,(function(t,e){return e.payload.token})),Object(ft.a)(jt,F,(function(){return null})),jt)),Xt=function(t,e){return e.payload},Zt=Object(C.c)(null,(ht={},Object(ft.a)(ht,y,Xt),Object(ft.a)(ht,L,Xt),Object(ft.a)(ht,R,Xt),Object(ft.a)(ht,A,Xt),ht)),$t=Object(It.c)({user:Qt,token:Vt,error:Zt}),te=Object(Mt.a)(Object(C.d)({serializableCheck:{ignoredActions:[Ut.a,Ut.f,Ut.b,Ut.c,Ut.d,Ut.e]}})),ee={key:"auth",storage:Ht.a,whitelist:["token"]},ne=Object(C.a)({reducer:{auth:Object(Ut.g)(ee,$t),contacts:Wt},middleware:te,devTools:!1}),ae=Object(Ut.h)(ne);s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(h.a,{store:ne,children:Object(m.jsx)(Tt.a,{loading:null,persistor:ae,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(Bt,{})})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.224f8991.chunk.js.map