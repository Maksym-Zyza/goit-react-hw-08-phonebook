(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{20:function(t,e,n){t.exports={title:"ContactForm_title__3MqSl",form:"ContactForm_form__1fuOn",label:"ContactForm_label__378f8",input:"ContactForm_input__gm87B",btn:"ContactForm_btn__2Bpnz"}},26:function(t,e,n){t.exports={wrapper:"Filter_wrapper__IqOjQ",label:"Filter_label__3DcZT",name:"Filter_name__pSTfl",input:"Filter_input__2DoVp"}},27:function(t,e,n){t.exports={listItem:"ContactList_listItem__29Cbr",name:"ContactList_name__2WLgA",namber:"ContactList_namber__xUfTY",btn:"ContactList_btn__1Xk4q"}},90:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(28),s=n.n(r),o=n(15),i=n(16),u=n(17),l=n(19),b=n(18),j=n(6),h=n(5),m=n(1),O=function(t){var e=t.children;return Object(m.jsx)("div",{className:"Container",children:e})},d=function(t){return t.auth.isAuthenticated},p=function(t){return t.auth.user.name},f=Object(h.b)((function(t){return{isAuthenticated:d(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)("nav",{children:[Object(m.jsx)(o.b,{to:"/",exact:!0,className:"link",activeClassName:"activeLink",children:"Home"}),e&&Object(m.jsx)(o.b,{to:"/contacts",exact:!0,className:"link",activeClassName:"activeLink",children:"Contacts"})]})})),x=n(13),v=n.n(x),g=n(23),C=n(12),N=n.n(C),k=n(3),y=Object(k.b)("auth/registerRequest"),w=Object(k.b)("auth/registerSuccess"),_=Object(k.b)("auth/registerError"),L=Object(k.b)("auth/loginRequest"),S=Object(k.b)("auth/loginSuccess"),A=Object(k.b)("auth/loginError"),F=Object(k.b)("auth/logoutRequest"),R=Object(k.b)("auth/logoutSuccess"),T=Object(k.b)("auth/logoutError"),D=Object(k.b)("auth/getCurrentUserRequest"),q=Object(k.b)("auth/getCurrentUserSuccess"),E=Object(k.b)("auth/getCurrentUserError");N.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var P=function(t){N.a.defaults.headers.common.Authorization="Bearer ".concat(t)},B=function(){N.a.defaults.headers.common.Authorization=""},M=n.p+"static/media/default-avatar.fe4c4f3c.jpeg",U={onLogout:function(){return function(){var t=Object(g.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(F()),t.prev=1,t.next=4,N.a.post("/users/logout");case 4:B(),e(R()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(T(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},I=Object(h.b)((function(t){return{name:p(t),avatar:M}}),U)((function(t){var e=t.avatar,n=t.name,a=t.onLogout;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("img",{src:e,alt:"",width:"32",className:"avatar"}),Object(m.jsxs)("span",{className:"name",children:["Welcome, ",n]}),Object(m.jsx)("button",{type:"button",onClick:a,className:"user-btn",children:"Log out"})]})})),z=function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(o.b,{to:"/register",exact:!0,className:"link",activeClassName:"activeLink",children:"Registration"}),Object(m.jsx)(o.b,{to:"/login",exact:!0,className:"link",activeClassName:"activeLink",children:"Login"})]})},J=Object(h.b)((function(t){return{isAuthenticated:d(t)}}))((function(t){var e=t.isAuthenticated;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)(f,{}),e?Object(m.jsx)(I,{}):Object(m.jsx)(z,{})]})})),G=function(){return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"home-view-title",children:"Phonebook"}),Object(m.jsxs)("h2",{className:"home-view-subtitle",children:["Your contacts in one place"," ",Object(m.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udc81\u200d\u2640\ufe0f"})]}),Object(m.jsx)("img",{className:"home-view-img",src:"https://cdn.lifehacker.ru/wp-content/uploads/2018/01/Kak-perenesti-kontakty-s-odnogo-telefona-na-drugoJ_1516567189-1140x570.jpg",alt:"home_view_img"})]})},W=Object(k.b)("contacts/fetchContactRequest"),Y=Object(k.b)("contacts/fetchContactSuccess"),H=Object(k.b)("contacts/fetchContactError"),K=Object(k.b)("contacts/addContactRequest"),Q=Object(k.b)("contacts/addContactSuccess"),V=Object(k.b)("contacts/addContactError"),X=Object(k.b)("contacts/delContactRequest"),Z=Object(k.b)("contacts/delContactSuccess"),$=Object(k.b)("contacts/delContactError"),tt=Object(k.b)("Contact/filter"),et=n(29),nt=function(t){return t.contacts.items},at=function(t){return t.contacts.loading},ct=function(t){return t.contacts.filter},rt=Object(et.a)([ct,nt],(function(t,e){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),st=n(26),ot=n.n(st),it=Object(h.b)((function(t){return{value:ct(t)}}),(function(t){return{onChange:function(e){return t(tt(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(m.jsx)("div",{className:ot.a.wrapper,children:Object(m.jsxs)("label",{className:ot.a.label,children:[Object(m.jsx)("span",{className:ot.a.name,children:"Find contacts by name"}),Object(m.jsx)("input",{className:ot.a.input,type:"text",name:"name",value:e,onChange:n})]})})}));N.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var ut,lt,bt,jt,ht,mt,Ot=n(27),dt=n.n(Ot),pt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){var t=this.props,e=t.contacts,n=t.onDelBtnClick;return Object(m.jsx)("ul",{children:e.map((function(t){return Object(m.jsxs)("li",{className:dt.a.listItem,children:[Object(m.jsxs)("span",{className:dt.a.name,children:[t.name,":"]}),Object(m.jsx)("span",{className:dt.a.namber,children:t.number}),Object(m.jsx)("button",{className:dt.a.btn,type:"button",id:t.id,onClick:function(t){return n(t.target.id)},children:"Delete"})]},t.id)}))})}}]),n}(c.a.Component),ft=Object(h.b)((function(t){return{contacts:rt(t)}}),(function(t){return{onDelBtnClick:function(e){return t(function(t){return function(e){e(X()),N.a.delete("/contacts/".concat(t)).then((function(){return e(Z(t))})).catch((function(t){return e($(t.message))}))}}(e))},fetchContacts:function(){return t(function(){var t=Object(g.a)(v.a.mark((function t(e){var n,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(W()),t.prev=1,t.next=4,N.a.get("/contacts");case 4:n=t.sent,a=n.data,e(Y(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(H(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}}}))(pt),xt=n(2),vt=n(20),gt=n.n(vt),Ct=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",number:""},t.handelChange=function(e){var n=e.currentTarget,a=n.name,c=n.value;t.setState(Object(xt.a)({},a,c))},t.resetForm=function(){t.setState({name:"",number:""})},t.handleSabmit=function(e){e.preventDefault();var n=t.state,a=n.name,c=n.number;if(t.props.contacts.some((function(t){return t.name===a})))return alert('Name "'.concat(a,'" already exists, please enter another name.'));t.props.onSubmit({name:a,number:c}),t.resetForm()},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.contacts;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:gt.a.title,children:"Phonebook"}),Object(m.jsxs)("form",{className:gt.a.form,autoComplete:"off",onSubmit:this.handleSabmit,children:[Object(m.jsxs)("label",{className:gt.a.label,children:["Name:",Object(m.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handelChange,className:gt.a.input})]}),Object(m.jsxs)("label",{className:gt.a.label,children:["Number:",Object(m.jsx)("input",{type:"tel",name:"number",value:this.state.number,onChange:this.handelChange,className:gt.a.input})]}),Object(m.jsx)("button",{type:"submit",className:gt.a.btn,children:"Add contact"})]}),Object(m.jsxs)("h2",{className:gt.a.title,children:["Contacts (",t.length,")"]})]})})}}]),n}(a.Component),Nt=Object(h.b)((function(t){return{contacts:nt(t)}}),(function(t){return{onSubmit:function(e){return t(function(t){var e=t.name,n=t.number;return function(t){var a={name:e,number:n};t(K()),N.a.post("/contacts",a).then((function(e){var n=e.data;return t(Q(n))})).catch((function(e){return t(V(e.message))}))}}(e))}}}))(Ct),kt=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h2",{className:"message",children:"Nothing, please start creating your contact"})})},yt=n(48),wt=n.n(yt),_t=function(){return Object(m.jsx)("div",{className:"loaderDiv",children:Object(m.jsx)(wt.a,{loading:!0,color:"red"})})},Lt=Object(h.b)((function(t){return{contacts:nt(t),isLoading:at(t)}}))((function(t){var e=t.contacts,n=t.isLoading;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)(Nt,{}),0===e.length&&Object(m.jsx)(kt,{}),e.length>1&&Object(m.jsx)(it,{}),n&&Object(m.jsx)(_t,{}),Object(m.jsx)(ft,{})]})})),St=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={name:"",email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(xt.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onRegister(t.state),t.setState({name:"",email:"",password:""})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.name,n=t.email,a=t.password;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"title",children:"Registration"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"authForm",autoComplete:"off",children:[Object(m.jsxs)("label",{className:"authLabel",children:["Name",Object(m.jsx)("input",{className:"input",type:"text",name:"name",value:e,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Mail",Object(m.jsx)("input",{className:"input",type:"email",name:"email",value:n,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Password",Object(m.jsx)("input",{className:"input",type:"password",name:"password",value:a,onChange:this.handleChange})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Registration"})]})]})}}]),n}(a.Component),At={onRegister:function(t){return function(){var e=Object(g.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(y()),e.prev=1,e.next=4,N.a.post("/users/signup",t);case 4:a=e.sent,P(a.data.token),n(w(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(_(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},Ft=Object(h.b)(null,At)(St),Rt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).state={email:"",password:""},t.handleChange=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(xt.a)({},a,c))},t.handleSubmit=function(e){e.preventDefault(),t.props.onLogin(t.state),t.setState({name:"",email:"",password:""})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.email,n=t.password;return Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("h1",{className:"title",children:"Please enter your login and password"}),Object(m.jsxs)("form",{onSubmit:this.handleSubmit,className:"authForm",autoComplete:"off",children:[Object(m.jsxs)("label",{className:"authLabel",children:["Mail",Object(m.jsx)("input",{className:"input",type:"email",name:"email",value:e,onChange:this.handleChange})]}),Object(m.jsxs)("label",{className:"authLabel",children:["Password",Object(m.jsx)("input",{className:"input",type:"password",name:"password",value:n,onChange:this.handleChange})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Log in"})]})]})}}]),n}(a.Component),Tt={onLogin:function(t){return function(){var e=Object(g.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(L()),e.prev=1,e.next=4,N.a.post("/users/login",t);case 4:a=e.sent,P(a.data.token),n(S(a.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(A(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}},Dt=Object(h.b)(null,Tt)(Rt),qt=n(22),Et=n(30),Pt=Object(h.b)((function(t){return{isAuthenticated:d(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,a=t.redirectTo,c=Object(Et.a)(t,["component","isAuthenticated","redirectTo"]);return Object(m.jsx)(j.b,Object(qt.a)(Object(qt.a)({},c),{},{render:function(t){return n?Object(m.jsx)(e,Object(qt.a)({},t)):Object(m.jsx)(j.a,{to:a})}}))})),Bt=Object(h.b)((function(t){return{isAuthenticated:d(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,a=t.redirectTo,c=Object(Et.a)(t,["component","isAuthenticated","redirectTo"]);return Object(m.jsx)(j.b,Object(qt.a)(Object(qt.a)({},c),{},{render:function(t){return n&&c.restricted?Object(m.jsx)(j.a,{to:a}):Object(m.jsx)(e,Object(qt.a)({},t))}}))})),Mt=function(t){Object(l.a)(n,t);var e=Object(b.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentToProps()}},{key:"render",value:function(){return Object(m.jsxs)(O,{children:[Object(m.jsx)(J,{}),Object(m.jsxs)(j.d,{children:[Object(m.jsx)(Bt,{exact:!0,path:"/",component:G}),Object(m.jsx)(Bt,{path:"/register",restricted:!0,redirectTo:"/contacts",component:Ft}),Object(m.jsx)(Bt,{path:"/login",restricted:!0,redirectTo:"/contacts",component:Dt}),Object(m.jsx)(Pt,{path:"/contacts",redirectTo:"/login",component:Lt})]})]})}}]),n}(c.a.Component),Ut={onGetCurrentToProps:function(){return function(){var t=Object(g.a)(v.a.mark((function t(e,n){var a,c,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n(),c=a.auth.token){t.next=3;break}return t.abrupt("return");case 3:return P(c),e(D()),t.prev=5,t.next=8,N.a.get("/users/current");case 8:r=t.sent,e(q(r.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(E(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},It=Object(h.b)(null,Ut)(Mt),zt=(n(89),n(90),n(49)),Jt=n(31),Gt=n(21),Wt=n(7),Yt=Object(k.c)([],(ut={},Object(xt.a)(ut,Y,(function(t,e){return e.payload})),Object(xt.a)(ut,Q,(function(t,e){var n=e.payload;return[].concat(Object(Jt.a)(t),[n])})),Object(xt.a)(ut,Z,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==Number(n)}))})),ut)),Ht=Object(k.c)("",Object(xt.a)({},tt,(function(t,e){return e.payload}))),Kt=Object(k.c)(!1,(lt={},Object(xt.a)(lt,W,(function(){return!0})),Object(xt.a)(lt,Y,(function(){return!1})),Object(xt.a)(lt,H,(function(){return!1})),Object(xt.a)(lt,K,(function(){return!0})),Object(xt.a)(lt,Q,(function(){return!1})),Object(xt.a)(lt,V,(function(){return!1})),Object(xt.a)(lt,X,(function(){return!0})),Object(xt.a)(lt,Z,(function(){return!1})),Object(xt.a)(lt,$,(function(){return!1})),lt)),Qt=Object(k.c)(null,{}),Vt=Object(Wt.c)({items:Yt,filter:Ht,loading:Kt,error:Qt}),Xt=n(50),Zt=n.n(Xt),$t={name:null,email:null},te=Object(k.c)($t,(bt={},Object(xt.a)(bt,w,(function(t,e){return e.payload.user})),Object(xt.a)(bt,S,(function(t,e){return e.payload.user})),Object(xt.a)(bt,R,(function(){return $t})),Object(xt.a)(bt,q,(function(t,e){return e.payload})),bt)),ee=Object(k.c)(null,(jt={},Object(xt.a)(jt,w,(function(t,e){return e.payload.token})),Object(xt.a)(jt,S,(function(t,e){return e.payload.token})),Object(xt.a)(jt,R,(function(){return null})),jt)),ne=function(t,e){return e.payload},ae=Object(k.c)(null,(ht={},Object(xt.a)(ht,_,ne),Object(xt.a)(ht,A,ne),Object(xt.a)(ht,T,ne),Object(xt.a)(ht,E,ne),ht)),ce=Object(k.c)(!1,(mt={},Object(xt.a)(mt,w,(function(){return!0})),Object(xt.a)(mt,S,(function(){return!0})),Object(xt.a)(mt,R,(function(){return!1})),Object(xt.a)(mt,q,(function(){return!0})),Object(xt.a)(mt,_,(function(){return!1})),Object(xt.a)(mt,A,(function(){return!1})),Object(xt.a)(mt,E,(function(){return!1})),mt)),re=Object(Wt.c)({user:te,isAuthenticated:ce,token:ee,error:ae}),se=Object(Jt.a)(Object(k.d)({serializableCheck:{ignoredActions:[Gt.a,Gt.f,Gt.b,Gt.c,Gt.d,Gt.e]}})),oe={key:"auth",storage:Zt.a,whitelist:["token"]},ie=Object(k.a)({reducer:{auth:Object(Gt.g)(oe,re),contacts:Vt},middleware:se,devTools:!1}),ue=Object(Gt.h)(ie);s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(h.a,{store:ie,children:Object(m.jsx)(zt.a,{loading:null,persistor:ue,children:Object(m.jsx)(o.a,{children:Object(m.jsx)(It,{})})})})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.5d7a35dd.chunk.js.map